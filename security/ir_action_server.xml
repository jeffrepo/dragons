<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Acci贸n de servidor para asignar todos los diarios -->
        <record id="action_assign_all_journals_to_users" model="ir.actions.server">
            <field name="name">Asignar todos los diarios a usuarios seleccionados</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="binding_model_id" ref="base.model_res_users"/>
            <field name="binding_view_types">list,form</field>
            <field name="state">code</field>
            <field name="code">
# Obtener todos los diarios disponibles
all_journals = env['account.journal'].sudo().search([])

# Asignar todos los diarios a los usuarios seleccionados
for user in records:
    user.sudo().write({
        'cash_diaries_ids': [(6, 0, all_journals.ids)]
    })
    env.cr.commit()

# Mensaje de confirmaci贸n
action = {
    'type': 'ir.actions.client',
    'tag': 'display_notification',
    'params': {
        'title': 'Diarios asignados',
        'message': f'Se asignaron {len(all_journals)} diarios a {len(records)} usuario(s)',
        'type': 'success',
        'sticky': False,
        'next': {'type': 'ir.actions.act_window_close'},
    }
}
            </field>
        </record>


        <!-- Acci贸n para almacenes -->
        <record id="action_assign_all_warehouses_to_users" model="ir.actions.server">
            <field name="name">Asignar todos los almacenes a usuarios</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="binding_model_id" ref="base.model_res_users"/>
            <field name="binding_view_types">list,form</field>
            <field name="state">code</field>
            <field name="code">
all_warehouses = env['stock.warehouse'].sudo().search([])
for user in records:
    user.sudo().write({'warehouse_ids': [(6, 0, all_warehouses.ids)]})
action = {
    'type': 'ir.actions.client',
    'tag': 'display_notification',
    'params': {
        'title': 'Almacenes asignados',
        'message': f'Se asignaron {len(all_warehouses)} almacenes a {len(records)} usuario(s)',
        'type': 'success', 'sticky': False,
        'next': {'type': 'ir.actions.act_window_close'},
    }
}
            </field>
        </record>

        <!-- Acci贸n para ubicaciones -->
        <record id="action_assign_all_locations_to_users" model="ir.actions.server">
            <field name="name">Asignar todas las ubicaciones a usuarios</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="binding_model_id" ref="base.model_res_users"/>
            <field name="binding_view_types">list,form</field>
            <field name="state">code</field>
            <field name="code">
all_locations = env['stock.location'].sudo().search([])
for user in records:
    user.sudo().write({'location_ids': [(6, 0, all_locations.ids)]})
action = {
    'type': 'ir.actions.client',
    'tag': 'display_notification',
    'params': {
        'title': 'Ubicaciones asignadas',
        'message': f'Se asignaron {len(all_locations)} ubicaciones a {len(records)} usuario(s)',
        'type': 'success', 'sticky': False,
        'next': {'type': 'ir.actions.act_window_close'},
    }
}
            </field>
        </record>

    </data>
</odoo>