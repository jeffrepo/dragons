<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="order_purchase_report_pdf">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.basic_layout">
                        <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)"/>
                        <style>
                            .report-table {
                                width: 100%;
                                border: 1px solid #000000;
                                border-collapse: collapse;
                                margin-bottom: 20px;
                                font-size:12px;
                            }
                            .report-table td, th {
                                padding: 2px;
                                border: 1px solid #000000;
                                text-align: center;
                                vertical-align: middle;
                            }
                            .header-cell {
                                background-color: #f2f2f2;
                                font-weight: bold;
                            }
                            .data-cell {
                                background-color: #ffffff;
                            }
                        </style>
                        <!-- Encabezado -->
                        <div class="header">
                            <div style="width:100%">
                                <div class="row" style="border:1px solid black">
                                    <div class="col-2 text-left" align="center" style="padding-top:5px">
                                        <img class="img-fluid" t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo" style="background-color:red; width:75%"/>
                                    </div>
                                    <div class="col-6 text-center" align="center" style="padding-top:5px;border-right:1px solid black">
                                        <p style="color:red;text-align:center; font-size:18px">
                                            <strong>DRAGONS DE VERACRUZ S.A. DE C.V.<br/>INGENIERIA APLICADA</strong>
                                        </p>
                                        <strong>PURCHASE ORDER</strong>
                                    </div>
                                    <div class="col-4 text-center" align="right" style="padding-top:5px">
                                        Format No.<br/>
                                        Revision #:<br/>
                                        <span t-if="report_type == 'pdf'">
                                            Page <span class="page"/> / <span class="topage"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Cuerpo -->
                        <div class="body" >
                            <table class="report-table">
                                <tr>
                                    <td class="header-cell" rowspan="2">Purchase Order No.:</td>
                                    <td class="data-cell" rowspan="2"><t t-esc="o.name"/></td>
                                    <td class="header-cell">Project / Procedure No.:</td>
                                    <td class="data-cell"></td>
                                    <td class="header-cell" rowspan="2">Creation Date</td>
                                    <td class="data-cell" rowspan="2"><t t-esc="o.create_date.strftime('%d/%m/%Y')"/></td>
                                </tr>
                                <tr>
                                    <td class="header-cell">Requester</td>
                                    <td class="data-cell"><t t-esc="o.partner_id.name"/></td>
                                </tr>
                            </table>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th class="header-cell" colspan="4">SUPPLIER INFORMATION</th>
                                    </tr>
                                </thead>
                                <tr>
                                    <td class="header-cell">Company Name,<br/> Tax ID / Tax Identification Number,<br/> Address, Contact (position),<br/>Email Address, Phone Number:</td>
                                    <td class="data-cell">
                                        <t t-esc="o.partner_id.name"/><br/>
                                        <t t-esc="o.partner_id.vat"/><br/>
                                        <t t-esc="o.partner_id.street if o.partner_id.street else ''"/> <t t-esc="o.partner_id.street2 if o.partner_id.street2 else ''"/> <t t-esc="o.partner_id.city if o.partner_id.city else ''"/> <t t-esc="o.partner_id.state_id.name if o.partner_id.state_id else ''"/> <t t-esc="o.partner_id.country_id.name if o.partner_id.country_id else ''"/> <br/>
                                        <t t-esc="o.partner_id.function if o.partner_id.function else ''"/>
                                        <t t-esc="o.partner_id.email if o.partner_id.email else ''"/>
                                        <t t-esc="o.partner_id.phone if o.partner_id.phone else ''"/>
                                    </td>
                                    <td class="header-cell">Bank Details:</td>
                                    <td class="data-cell">
                                        <t t-foreach="o.partner_id.bank_ids" t-as="bank">
                                            <t t-esc="bank.acc_number"/> - <t t-esc="bank.bank_id.name"/><br/>
                                        </t>
                                        <t t-if="not o.partner_id.bank_ids">No bank details registered</t>
                                    </td>
                                </tr>
                            </table>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th class="header-cell" rowspan="3">Item</th>
                                        <th class="header-cell" rowspan="3">Quantity</th>
                                        <th class="header-cell" rowspan="3">Unit of<br/>Measure</th>
                                        <th class="header-cell" rowspan="3">Quality<br/>Category</th>
                                        <th class="header-cell" rowspan="3">Part Number<br/>or Service</th>
                                        <th class="header-cell" rowspan="3">Description</th>
                                        <th class="header-cell" colspan="2">Price</th>
                                    </tr>
                                    <tr>
                                        <th class="header-cell">Currency</th>
                                        <td class="data-cell"><t t-esc="o.currency_id.symbol if o.currency_id else ''"/></td>
                                    </tr>
                                    <tr>
                                        <th class="header-cell">Unit Price</th>
                                        <th class="header-cell">Subtotal</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="o.order_line" t-as="line">
                                        <tr>
                                            <td class="data-cell"><t t-esc="line.sequence or line.id"/></td>
                                            <td class="data-cell"><t t-esc="line.product_qty"/></td>
                                            <td class="data-cell"><t t-esc="line.product_uom.name"/></td>
                                            <td class="data-cell"><t t-esc="line.product_id.categ_id.name or ''"/></td>
                                            <td class="data-cell"><t t-esc="line.product_id.default_code or ''"/></td>
                                            <td class="data-cell"><t t-esc="line.name"/></td>
                                            <td class="data-cell"><t t-esc="o.currency_id.format(line.price_unit)"/></td>
                                            <td class="data-cell"><t t-esc="o.currency_id.format(line.price_subtotal)"/></td>
                                        </tr>
                                    </t>
                                    <tr>
                                        <td class="header-cell" colspan="7" style="text-align: right;"><strong>Subtotal</strong></td>
                                        <td class="header-cell"><strong><t t-esc="o.currency_id.format(o.amount_untaxed)"/></strong></td>
                                    </tr>
                                    <tr t-foreach="o.tax_totals.get('subtotals', [])" t-as="subtotal">
                                        <t t-foreach="subtotal.get('tax_groups', [])" t-as="tax_group">
                                            <tr>
                                                <td class="header-cell" colspan="7" style="text-align: right"><strong><t t-esc="tax_group.get('group_name', 'Sin nombre')"/></strong></td>
                                                <td class="header-cell" style="text-align: right"><strong><t t-esc="tax_group.get('tax_amount_currency', 0)"/></strong></td>
                                            </tr>
                                        </t>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="report-table">
                                <tbody>
                                    <tr>
                                        <td class="header-cell">Delivery Time / <br/>Execution Period:</td>
                                        <td class="data-cell"><t t-esc="o.date_planned.strftime('%d/%m/%Y') if o.date_planned else ''"/></td>
                                        <td class="header-cell"><t t-esc="o.currency_id.name if o.currency_id else ''"/></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td class="header-cell">Warranty</td>
                                        <td colspan="3"></td>
                                    </tr>
                                    <tr>
                                        <td class="header-cell">Payment Terms:</td>
                                        <td colspan="3"><t t-esc="o.payment_term_id.name if o.payment_term_id else ''"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th colspan="2" class="header-cell"><strong>DRAGONS DE VERACRUZ, S.A. DE C.V. BILLING INFORMATION</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="header-cell">Company Name, Tax ID, Address,<br/> Contact (position), Email Address, <br/> Phone Number:</td>
                                        <td class="data-cell">
                                            <t t-esc="o.company_id.name"/><br/>
                                            <t t-esc="o.company_id.vat"/><br/>
                                            <t t-esc="o.company_id.street if o.company_id.street else ''"/> <t t-esc="o.company_id.city if o.company_id.city else ''"/> <t t-esc="o.company_id.state_id.name if o.company_id.state_id.name else ''"/> <t t-esc="o.company_id.country_id.name if o.company_id.country_id.name else '' "/><br/>
                                            <t t-esc="o.user_id.name if o.user_id else ''"/> <t t-esc="o.user_id.partner_id.function if o.user_id else ''"/><br/>
                                            <t t-esc="o.company_id.email if o.company_id.email else ''"/><br/>
                                            <t t-esc="o.company_id.phone if o.company_id.phone else ''"/><br/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div style="page-break-before: always;"/>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th class="header-cell" colspan="2"><strong>IMPORT / DELIVERY TERMS</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="header-cell">Incoterms:</td>
                                        <td class="data-cell"><t t-esc="o.incoterm_id.code if o.incoterm_id else ''"/> <t t-esc="o.incoterm_id.name if o.incoterm_id else ''"/></td>
                                    </tr>
                                    <tr>
                                        <td class="header-cell">Shipping Instructions:</td>
                                        <td class="data-cell"></td>
                                    </tr>
                                    <tr>
                                        <td class="header-cell">Customs Broker:</td>
                                        <td class="data-cell"></td>
                                    </tr>
                                    <tr>
                                        <td class="header-cell" colspan="2">OBSERVATIONS</td>
                                    </tr>
                                    <tr>
                                        <td class="data-cell" colspan="2"><div t-field="o.notes"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>
                                Attached Provider Proposal<br/>
                                Attached Quality Requirements<br/>
                                Attached Technical Requirements<br/>
                                Supplier approved by Quality Assurance<br/>
                                Commercial Grade Supplier
                            </p>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th class="header-cell" rowspan="2">Responsible</th>
                                        <th class="header-cell">PREPARES</th>
                                        <th class="header-cell">REVIEWS</th>
                                        <th class="header-cell">VERIFIES</th>
                                        <th class="header-cell">Vo.Bo</th>
                                        <th class="header-cell">Vo.Bo</th>
                                        <th class="header-cell">APPROVES</th>
                                    </tr>
                                    <tr>
                                        <th class="header-cell">DN/DO</th>
                                        <th class="header-cell">DDN/DDO</th>
                                        <th class="header-cell">GACN</th>
                                        <th class="header-cell">DL</th>
                                        <th class="header-cell">DA</th>
                                        <th class="header-cell">DG</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="header-cell">Name, Signature and Date:</td>
                                        <td class="data-cell"></td>
                                        <td class="data-cell"></td>
                                        <td class="data-cell"></td>
                                        <td class="data-cell"></td>
                                        <td class="data-cell"></td>
                                        <td class="data-cell"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th class="header-cell" colspan="3">CONFIRMATION AND ACCEPTANCE OF THIS PURCHASE ORDER</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border:1px solid Transparent">
                                        <td style="border-right:1px solid Transparent;"><br/><br/><br/></td>
                                        <td style="border:1px solid Transparent"><br/></td>
                                        <td style="border-left:1px solid Transparent"><br/></td>
                                    </tr>
                                    <tr>
                                        <td style="border-top:1px solid black; border-right:1px solid Transparent; padding-top:10px; width:50%">
                                            <t t-esc="o.company_id.name"/>
                                        </td>
                                        <td style="border-left:1px solid Transparent;border-top:1px solid Transparent; border-right:1px solid Transparent"></td>
                                        <td style="border-top:1px solid black; padding-top:10px">
                                            <t t-esc="o.partner_id.name"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
